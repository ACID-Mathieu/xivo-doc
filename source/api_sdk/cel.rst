***************************
Channel Event Logging (CEL)
***************************

CELs are the mechanism used by Asterisk to store telephony events. XiVO uses
CELs instead of CDRs since they are more accurate and flexible.

Official Documentation
======================

Asterisk's CEL documentation can be accessed online on the
`Asterisk wiki <https://wiki.asterisk.org/wiki/display/AST/Channel+Event+Logging+%28CEL%29>`_.

CEL Samples
===========

The following configuration will be used for the following examples.

* User `Tux` with extension `1000`.
* User `Père Noël` with extension `1001`.
* External User with number `555-555-5555`.
* External calls to DID `445` are sent to `1000`.
* External calls to DID `446` are sent to `1001`.

Internal Call
-------------

#. 1000 calls 1001.
#. 1001 *answers*.
#. 1001 *hangs up* after a few seconds.

::

     id  |  eventtype   |         eventtime          | userdeftype | cid_name  | cid_num | cid_ani | cid_rdnis | cid_dnid | exten | context |      channame       | appname |     appdata     | amaflags | accountcode | peeraccount |   uniqueid   |   linkedid   | userfield | peer 
   ------+--------------+----------------------------+-------------+-----------+---------+---------+-----------+----------+-------+---------+---------------------+---------+-----------------+----------+-------------+-------------+--------------+--------------+-----------+------
    8527 | CHAN_START   | 2012-03-28 13:43:55.379674 |             | Tux       | 1000    |         |           |          | 1001  | default | SIP/k6ztm5-00000004 |         |                 |        3 |             |             | 1332956635.4 | 1332956635.4 |           | 
    8528 | APP_START    | 2012-03-28 13:43:55.435472 |             | Tux       | 1000    | 1000    |           | 1001     | s     | user    | SIP/k6ztm5-00000004 | Dial    | SIP/ge8xbi,30,  |        3 |             |             | 1332956635.4 | 1332956635.4 |           | 
    8529 | CHAN_START   | 2012-03-28 13:43:55.435726 |             | Père Noël | 1001    |         |           |          | s     | default | SIP/ge8xbi-00000005 |         |                 |        3 |             |             | 1332956635.5 | 1332956635.4 |           | 
    8530 | ANSWER       | 2012-03-28 13:43:56.672155 |             | Père Noël | 1001    | 1001    |           |          | s     | default | SIP/ge8xbi-00000005 | AppDial | (Outgoing Line) |        3 |             |             | 1332956635.5 | 1332956635.4 |           | 
    8531 | ANSWER       | 2012-03-28 13:43:56.672554 |             | Tux       | 1000    | 1000    |           | 1001     | s     | user    | SIP/k6ztm5-00000004 | Dial    | SIP/ge8xbi,30,  |        3 |             |             | 1332956635.4 | 1332956635.4 |           | 
    8532 | BRIDGE_START | 2012-03-28 13:43:56.6726   |             | Tux       | 1000    | 1000    |           | 1001     | s     | user    | SIP/k6ztm5-00000004 | Dial    | SIP/ge8xbi,30,  |        3 |             |             | 1332956635.4 | 1332956635.4 |           | 
    8533 | BRIDGE_END   | 2012-03-28 13:44:01.719856 |             | Tux       | 1000    | 1000    |           | 1001     | s     | user    | SIP/k6ztm5-00000004 | Dial    | SIP/ge8xbi,30,  |        3 |             |             | 1332956635.4 | 1332956635.4 |           | 
    8534 | HANGUP       | 2012-03-28 13:44:01.720438 |             | Père Noël | 1001    | 1001    |           |          |       | user    | SIP/ge8xbi-00000005 | AppDial | (Outgoing Line) |        3 |             |             | 1332956635.5 | 1332956635.4 |           | 
    8535 | CHAN_END     | 2012-03-28 13:44:01.720481 |             | Père Noël | 1001    | 1001    |           |          |       | user    | SIP/ge8xbi-00000005 | AppDial | (Outgoing Line) |        3 |             |             | 1332956635.5 | 1332956635.4 |           | 
    8536 | HANGUP       | 2012-03-28 13:44:01.720574 |             | Tux       | 1000    | 1000    |           | 1001     | s     | user    | SIP/k6ztm5-00000004 |         |                 |        3 |             |             | 1332956635.4 | 1332956635.4 |           | 
    8537 | CHAN_END     | 2012-03-28 13:44:01.720985 |             | Tux       | 1000    | 1000    |           | 1001     | s     | user    | SIP/k6ztm5-00000004 |         |                 |        3 |             |             | 1332956635.4 | 1332956635.4 |           | 
   (11 rows)

#. 1000 calls 1001.
#. 1001 *ignores* the call.

::

     id  | eventtype  |         eventtime          | userdeftype | cid_name  | cid_num | cid_ani | cid_rdnis | cid_dnid | exten  |   context   |      channame       | appname |     appdata     | amaflags | accountcode | peeraccount |   uniqueid    |   linkedid    | userfield | peer 
   ------+------------+----------------------------+-------------+-----------+---------+---------+-----------+----------+--------+-------------+---------------------+---------+-----------------+----------+-------------+-------------+---------------+---------------+-----------+------
    8578 | CHAN_START | 2012-03-28 14:02:11.862776 |             | Tux       | 1000    |         |           |          | 1001   | default     | SIP/k6ztm5-0000000e |         |                 |        3 |             |             | 1332957731.14 | 1332957731.14 |           | 
    8579 | APP_START  | 2012-03-28 14:02:11.924236 |             | Tux       | 1000    | 1000    |           | 1001     | s      | user        | SIP/k6ztm5-0000000e | Dial    | SIP/ge8xbi,30,  |        3 |             |             | 1332957731.14 | 1332957731.14 |           | 
    8580 | CHAN_START | 2012-03-28 14:02:11.924434 |             | Père Noël | 1001    |         |           |          | s      | default     | SIP/ge8xbi-0000000f |         |                 |        3 |             |             | 1332957731.15 | 1332957731.14 |           | 
    8581 | HANGUP     | 2012-03-28 14:02:21.05216  |             | Père Noël | 1001    | 1001    |           |          | s      | default     | SIP/ge8xbi-0000000f | AppDial | (Outgoing Line) |        3 |             |             | 1332957731.15 | 1332957731.14 |           | 
    8582 | CHAN_END   | 2012-03-28 14:02:21.052217 |             | Père Noël | 1001    | 1001    |           |          | s      | default     | SIP/ge8xbi-0000000f | AppDial | (Outgoing Line) |        3 |             |             | 1332957731.15 | 1332957731.14 |           | 
    8583 | ANSWER     | 2012-03-28 14:02:21.0547   |             | Tux       | 1000    | 1000    |           | 1001     | pickup | xivo-pickup | SIP/k6ztm5-0000000e | Answer  |                 |        3 |             |             | 1332957731.14 | 1332957731.14 |           | 
    8584 | HANGUP     | 2012-03-28 14:02:27.164036 |             | Tux       | 1000    | 1000    |           | 1001     | s      | hangup      | SIP/k6ztm5-0000000e |         |                 |        3 |             |             | 1332957731.14 | 1332957731.14 |           | 
    8585 | CHAN_END   | 2012-03-28 14:02:27.164529 |             | Tux       | 1000    | 1000    |           | 1001     | s      | hangup      | SIP/k6ztm5-0000000e |         |                 |        3 |             |             | 1332957731.14 | 1332957731.14 |           | 
   (8 rows)

Internal Call Using Originate
-----------------------------

#. 1000 calls 1001 from his XiVO client.
#. 1001 *answers*.
#. 1001 *hangs up* after a few seconds.

::

     id  |  eventtype   |         eventtime          | userdeftype | cid_name  | cid_num | cid_ani | cid_rdnis | cid_dnid | exten | context |      channame       | appname |     appdata     | amaflags | accountcode | peeraccount |   uniqueid   |   linkedid   | userfield | peer 
   ------+--------------+----------------------------+-------------+-----------+---------+---------+-----------+----------+-------+---------+---------------------+---------+-----------------+----------+-------------+-------------+--------------+--------------+-----------+------
    8538 | CHAN_START   | 2012-03-28 13:46:29.539804 |             | Tux       | 1000    |         |           |          | s     | default | SIP/k6ztm5-00000006 |         |                 |        3 |             |             | 1332956789.6 | 1332956789.6 |           | 
    8539 | ANSWER       | 2012-03-28 13:46:31.570207 |             | 1001      | 1001    | 1001    |           |          |       | default | SIP/k6ztm5-00000006 |         |                 |        3 |             |             | 1332956789.6 | 1332956789.6 |           | 
    8540 | APP_START    | 2012-03-28 13:46:31.633132 |             | Tux       | 1000    | 1001    |           |          | s     | user    | SIP/k6ztm5-00000006 | Dial    | SIP/ge8xbi,30,  |        3 |             |             | 1332956789.6 | 1332956789.6 |           | 
    8541 | CHAN_START   | 2012-03-28 13:46:31.633316 |             | Père Noël | 1001    |         |           |          | s     | default | SIP/ge8xbi-00000007 |         |                 |        3 |             |             | 1332956791.7 | 1332956789.6 |           | 
    8542 | ANSWER       | 2012-03-28 13:46:33.356198 |             | Père Noël | 1001    | 1001    |           |          | s     | default | SIP/ge8xbi-00000007 | AppDial | (Outgoing Line) |        3 |             |             | 1332956791.7 | 1332956789.6 |           | 
    8543 | BRIDGE_START | 2012-03-28 13:46:33.356388 |             | Tux       | 1000    | 1001    |           |          | s     | user    | SIP/k6ztm5-00000006 | Dial    | SIP/ge8xbi,30,  |        3 |             |             | 1332956789.6 | 1332956789.6 |           | 
    8544 | BRIDGE_END   | 2012-03-28 13:46:39.145872 |             | Tux       | 1000    | 1001    |           |          | s     | user    | SIP/k6ztm5-00000006 | Dial    | SIP/ge8xbi,30,  |        3 |             |             | 1332956789.6 | 1332956789.6 |           | 
    8545 | HANGUP       | 2012-03-28 13:46:39.146556 |             | Père Noël | 1001    | 1001    |           |          |       | user    | SIP/ge8xbi-00000007 | AppDial | (Outgoing Line) |        3 |             |             | 1332956791.7 | 1332956789.6 |           | 
    8546 | CHAN_END     | 2012-03-28 13:46:39.146633 |             | Père Noël | 1001    | 1001    |           |          |       | user    | SIP/ge8xbi-00000007 | AppDial | (Outgoing Line) |        3 |             |             | 1332956791.7 | 1332956789.6 |           | 
    8547 | HANGUP       | 2012-03-28 13:46:39.14673  |             | Tux       | 1000    | 1001    |           |          | s     | user    | SIP/k6ztm5-00000006 |         |                 |        3 |             |             | 1332956789.6 | 1332956789.6 |           | 
    8548 | CHAN_END     | 2012-03-28 13:46:39.147224 |             | Tux       | 1000    | 1001    |           |          | s     | user    | SIP/k6ztm5-00000006 |         |                 |        3 |             |             | 1332956789.6 | 1332956789.6 |           | 
   (11 rows)

#. 1000 calls 1001 from his XiVO client.
#. 1001 *ignores* the call.

::

     id  | eventtype  |         eventtime          | userdeftype | cid_name  | cid_num | cid_ani | cid_rdnis | cid_dnid | exten | context |      channame       | appname |     appdata     | amaflags | accountcode | peeraccount |   uniqueid    |   linkedid    | userfield | peer 
   ------+------------+----------------------------+-------------+-----------+---------+---------+-----------+----------+-------+---------+---------------------+---------+-----------------+----------+-------------+-------------+---------------+---------------+-----------+------
    8594 | CHAN_START | 2012-03-28 14:06:36.616875 |             | Tux       | 1000    |         |           |          | s     | default | SIP/k6ztm5-00000012 |         |                 |        3 |             |             | 1332957996.18 | 1332957996.18 |           | 
    8595 | ANSWER     | 2012-03-28 14:06:41.370874 |             | 1001      | 1001    | 1001    |           |          |       | default | SIP/k6ztm5-00000012 |         |                 |        3 |             |             | 1332957996.18 | 1332957996.18 |           | 
    8596 | APP_START  | 2012-03-28 14:06:41.431579 |             | Tux       | 1000    | 1001    |           |          | s     | user    | SIP/k6ztm5-00000012 | Dial    | SIP/ge8xbi,30,  |        3 |             |             | 1332957996.18 | 1332957996.18 |           | 
    8597 | CHAN_START | 2012-03-28 14:06:41.431737 |             | Père Noël | 1001    |         |           |          | s     | default | SIP/ge8xbi-00000013 |         |                 |        3 |             |             | 1332958001.19 | 1332957996.18 |           | 
    8598 | HANGUP     | 2012-03-28 14:06:47.283285 |             | Père Noël | 1001    | 1001    |           |          | s     | default | SIP/ge8xbi-00000013 | AppDial | (Outgoing Line) |        3 |             |             | 1332958001.19 | 1332957996.18 |           | 
    8599 | CHAN_END   | 2012-03-28 14:06:47.283344 |             | Père Noël | 1001    | 1001    |           |          | s     | default | SIP/ge8xbi-00000013 | AppDial | (Outgoing Line) |        3 |             |             | 1332958001.19 | 1332957996.18 |           | 
    8600 | HANGUP     | 2012-03-28 14:06:53.200459 |             | Tux       | 1000    | 1001    |           |          | s     | hangup  | SIP/k6ztm5-00000012 |         |                 |        3 |             |             | 1332957996.18 | 1332957996.18 |           | 
    8601 | CHAN_END   | 2012-03-28 14:06:53.200924 |             | Tux       | 1000    | 1001    |           |          | s     | hangup  | SIP/k6ztm5-00000012 |         |                 |        3 |             |             | 1332957996.18 | 1332957996.18 |           | 
   (8 rows)

#. 1000 calls 1001 from his XiVO client.
#. 1000 *ignores* the originate.

::

     id  | eventtype  |         eventtime          | userdeftype | cid_name | cid_num | cid_ani | cid_rdnis | cid_dnid | exten | context |      channame       | appname | appdata | amaflags | accountcode | peeraccount |   uniqueid    |   linkedid    | userfield | peer 
   ------+------------+----------------------------+-------------+----------+---------+---------+-----------+----------+-------+---------+---------------------+---------+---------+----------+-------------+-------------+---------------+---------------+-----------+------
    8602 | CHAN_START | 2012-03-28 14:08:21.083271 |             | Tux      | 1000    |         |           |          | s     | default | SIP/k6ztm5-00000014 |         |         |        3 |             |             | 1332958101.20 | 1332958101.20 |           | 
    8603 | HANGUP     | 2012-03-28 14:08:34.431701 |             | 1001     | 1001    | 1001    |           |          | 1001  | default | SIP/k6ztm5-00000014 |         |         |        3 |             |             | 1332958101.20 | 1332958101.20 |           | 
    8604 | CHAN_END   | 2012-03-28 14:08:34.431759 |             | 1001     | 1001    | 1001    |           |          | 1001  | default | SIP/k6ztm5-00000014 |         |         |        3 |             |             | 1332958101.20 | 1332958101.20 |           | 
   (3 rows)

External Call
-------------

#. External user (`555-555-5555`) calls 445.
#. 1000 *answers*.
#. 1000 *hangs up* after a few seconds.

::

     id  |  eventtype   |         eventtime          | userdeftype |  cid_name  |  cid_num   |  cid_ani   | cid_rdnis | cid_dnid | exten |   context   |       channame       | appname |     appdata     | amaflags | accountcode | peeraccount |   uniqueid    |   linkedid    | userfield | peer 
   ------+--------------+----------------------------+-------------+------------+------------+------------+-----------+----------+-------+-------------+----------------------+---------+-----------------+----------+-------------+-------------+---------------+---------------+-----------+------
    8567 | CHAN_START   | 2012-03-28 13:58:49.004403 |             | 5555555555 | 5555555555 |            |           |          | 445   | from-extern | SIP/pcm_dev-0000000c |         |                 |        3 |             |             | 1332957529.12 | 1332957529.12 |           | 
    8568 | APP_START    | 2012-03-28 13:58:49.076665 |             | 5555555555 | 5555555555 | 5555555555 |           | 445      | s     | user        | SIP/pcm_dev-0000000c | Dial    | SIP/k6ztm5,30,  |        3 |             |             | 1332957529.12 | 1332957529.12 |           | 
    8569 | CHAN_START   | 2012-03-28 13:58:49.076842 |             | Tux        | 1000       |            |           |          | s     | default     | SIP/k6ztm5-0000000d  |         |                 |        3 |             |             | 1332957529.13 | 1332957529.12 |           | 
    8570 | ANSWER       | 2012-03-28 13:59:00.173302 |             | Tux        | 1000       | 1000       |           |          | s     | default     | SIP/k6ztm5-0000000d  | AppDial | (Outgoing Line) |        3 |             |             | 1332957529.13 | 1332957529.12 |           | 
    8571 | ANSWER       | 2012-03-28 13:59:00.173818 |             | 5555555555 | 5555555555 | 5555555555 |           | 445      | s     | user        | SIP/pcm_dev-0000000c | Dial    | SIP/k6ztm5,30,  |        3 |             |             | 1332957529.12 | 1332957529.12 |           | 
    8572 | BRIDGE_START | 2012-03-28 13:59:00.173872 |             | 5555555555 | 5555555555 | 5555555555 |           | 445      | s     | user        | SIP/pcm_dev-0000000c | Dial    | SIP/k6ztm5,30,  |        3 |             |             | 1332957529.12 | 1332957529.12 |           | 
    8573 | BRIDGE_END   | 2012-03-28 13:59:06.386394 |             | 5555555555 | 5555555555 | 5555555555 |           | 445      | s     | user        | SIP/pcm_dev-0000000c | Dial    | SIP/k6ztm5,30,  |        3 |             |             | 1332957529.12 | 1332957529.12 |           | 
    8574 | HANGUP       | 2012-03-28 13:59:06.38711  |             | Tux        | 1000       | 1000       |           |          |       | user        | SIP/k6ztm5-0000000d  | AppDial | (Outgoing Line) |        3 |             |             | 1332957529.13 | 1332957529.12 |           | 
    8575 | CHAN_END     | 2012-03-28 13:59:06.387153 |             | Tux        | 1000       | 1000       |           |          |       | user        | SIP/k6ztm5-0000000d  | AppDial | (Outgoing Line) |        3 |             |             | 1332957529.13 | 1332957529.12 |           | 
    8576 | HANGUP       | 2012-03-28 13:59:06.387246 |             | 5555555555 | 5555555555 | 5555555555 |           | 445      | s     | user        | SIP/pcm_dev-0000000c |         |                 |        3 |             |             | 1332957529.12 | 1332957529.12 |           | 
    8577 | CHAN_END     | 2012-03-28 13:59:06.387703 |             | 5555555555 | 5555555555 | 5555555555 |           | 445      | s     | user        | SIP/pcm_dev-0000000c |         |                 |        3 |             |             | 1332957529.12 | 1332957529.12 |           | 
   (11 rows)

#. External user (`555-555-5555`) calls 446.
#. 1001 *ignores* the call.

::

     id  | eventtype  |         eventtime          | userdeftype |  cid_name  |  cid_num   |  cid_ani   | cid_rdnis | cid_dnid | exten  |   context   |       channame       | appname |     appdata     | amaflags | accountcode | peeraccount |   uniqueid    |   linkedid    | userfield | peer 
   ------+------------+----------------------------+-------------+------------+------------+------------+-----------+----------+--------+-------------+----------------------+---------+-----------------+----------+-------------+-------------+---------------+---------------+-----------+------
    8620 | CHAN_START | 2012-03-28 14:12:13.940952 |             | 5555555555 | 5555555555 |            |           |          | 446    | from-extern | SIP/pcm_dev-00000019 |         |                 |        3 |             |             | 1332958333.25 | 1332958333.25 |           | 
    8621 | APP_START  | 2012-03-28 14:12:14.028157 |             | 5555555555 | 5555555555 | 5555555555 |           | 446      | s      | user        | SIP/pcm_dev-00000019 | Dial    | SIP/ge8xbi,30,  |        3 |             |             | 1332958333.25 | 1332958333.25 |           | 
    8622 | CHAN_START | 2012-03-28 14:12:14.02839  |             | Père Noël  | 1001       |            |           |          | s      | default     | SIP/ge8xbi-0000001a  |         |                 |        3 |             |             | 1332958334.26 | 1332958333.25 |           | 
    8623 | HANGUP     | 2012-03-28 14:12:21.070432 |             | Père Noël  | 1001       | 1001       |           |          | s      | default     | SIP/ge8xbi-0000001a  | AppDial | (Outgoing Line) |        3 |             |             | 1332958334.26 | 1332958333.25 |           | 
    8624 | CHAN_END   | 2012-03-28 14:12:21.070489 |             | Père Noël  | 1001       | 1001       |           |          | s      | default     | SIP/ge8xbi-0000001a  | AppDial | (Outgoing Line) |        3 |             |             | 1332958334.26 | 1332958333.25 |           | 
    8625 | ANSWER     | 2012-03-28 14:12:21.072653 |             | 5555555555 | 5555555555 | 5555555555 |           | 446      | pickup | xivo-pickup | SIP/pcm_dev-00000019 | Answer  |                 |        3 |             |             | 1332958333.25 | 1332958333.25 |           | 
    8626 | HANGUP     | 2012-03-28 14:12:26.202676 |             | 5555555555 | 5555555555 | 5555555555 |           | 446      | s      | hangup      | SIP/pcm_dev-00000019 |         |                 |        3 |             |             | 1332958333.25 | 1332958333.25 |           | 
    8627 | CHAN_END   | 2012-03-28 14:12:26.203237 |             | 5555555555 | 5555555555 | 5555555555 |           | 446      | s      | hangup      | SIP/pcm_dev-00000019 |         |                 |        3 |             |             | 1332958333.25 | 1332958333.25 |           | 
   (8 rows)

Blind Transfer
--------------

#. External user (`555-555-5555`) calls 445.
#. 1000 *answers*.
#. 1000 *blind transfer* to 1001
#. 1001 *answers*
#. 1001 *hangs up* after a few seconds.

::

     id  |  eventtype   |         eventtime          | userdeftype |  cid_name  |  cid_num   |  cid_ani   | cid_rdnis | cid_dnid | exten |   context   |       channame       | appname |     appdata     | amaflags | accountcode | peeraccount |   uniqueid    |   linkedid    | userfield | peer 
   ------+--------------+----------------------------+-------------+------------+------------+------------+-----------+----------+-------+-------------+----------------------+---------+-----------------+----------+-------------+-------------+---------------+---------------+-----------+------
    8689 | CHAN_START   | 2012-03-28 14:21:05.928445 |             | 5555555555 | 5555555555 |            |           |          | 445   | from-extern | SIP/pcm_dev-00000026 |         |                 |        3 |             |             | 1332958865.38 | 1332958865.38 |           | 
    8690 | APP_START    | 2012-03-28 14:21:06.016235 |             | 5555555555 | 5555555555 | 5555555555 |           | 445      | s     | user        | SIP/pcm_dev-00000026 | Dial    | SIP/k6ztm5,30,  |        3 |             |             | 1332958865.38 | 1332958865.38 |           | 
    8691 | CHAN_START   | 2012-03-28 14:21:06.016426 |             | Tux        | 1000       |            |           |          | s     | default     | SIP/k6ztm5-00000027  |         |                 |        3 |             |             | 1332958866.39 | 1332958865.38 |           | 
    8692 | ANSWER       | 2012-03-28 14:21:07.600329 |             | Tux        | 1000       | 1000       |           |          | s     | default     | SIP/k6ztm5-00000027  | AppDial | (Outgoing Line) |        3 |             |             | 1332958866.39 | 1332958865.38 |           | 
    8693 | ANSWER       | 2012-03-28 14:21:07.600741 |             | 5555555555 | 5555555555 | 5555555555 |           | 445      | s     | user        | SIP/pcm_dev-00000026 | Dial    | SIP/k6ztm5,30,  |        3 |             |             | 1332958865.38 | 1332958865.38 |           | 
    8694 | BRIDGE_START | 2012-03-28 14:21:07.6008   |             | 5555555555 | 5555555555 | 5555555555 |           | 445      | s     | user        | SIP/pcm_dev-00000026 | Dial    | SIP/k6ztm5,30,  |        3 |             |             | 1332958865.38 | 1332958865.38 |           | 
    8695 | BRIDGE_END   | 2012-03-28 14:21:13.11719  |             | 5555555555 | 5555555555 | 5555555555 |           | 445      | 1001  | default     | SIP/pcm_dev-00000026 | Dial    | SIP/k6ztm5,30,  |        3 |             |             | 1332958865.38 | 1332958865.38 |           | 
    8696 | HANGUP       | 2012-03-28 14:21:13.117526 |             | Tux        | 1000       | 1000       |           |          |       | default     | SIP/k6ztm5-00000027  | AppDial | (Outgoing Line) |        3 |             |             | 1332958866.39 | 1332958865.38 |           | 
    8697 | CHAN_END     | 2012-03-28 14:21:13.117574 |             | Tux        | 1000       | 1000       |           |          |       | default     | SIP/k6ztm5-00000027  | AppDial | (Outgoing Line) |        3 |             |             | 1332958866.39 | 1332958865.38 |           | 
    8698 | APP_START    | 2012-03-28 14:21:13.199251 |             | 5555555555 | 5555555555 | 5555555555 |           | 445      | s     | user        | SIP/pcm_dev-00000026 | Dial    | SIP/ge8xbi,30,  |        3 |             |             | 1332958865.38 | 1332958865.38 |           | 
    8699 | CHAN_START   | 2012-03-28 14:21:13.199432 |             | Père Noël  | 1001       |            |           |          | s     | default     | SIP/ge8xbi-00000028  |         |                 |        3 |             |             | 1332958873.40 | 1332958865.38 |           | 
    8700 | ANSWER       | 2012-03-28 14:21:16.573668 |             | Père Noël  | 1001       | 1001       |           |          | s     | default     | SIP/ge8xbi-00000028  | AppDial | (Outgoing Line) |        3 |             |             | 1332958873.40 | 1332958865.38 |           | 
    8701 | BRIDGE_START | 2012-03-28 14:21:16.573876 |             | 5555555555 | 5555555555 | 5555555555 |           | 445      | s     | user        | SIP/pcm_dev-00000026 | Dial    | SIP/ge8xbi,30,  |        3 |             |             | 1332958865.38 | 1332958865.38 |           | 
    8702 | BRIDGE_END   | 2012-03-28 14:21:23.120075 |             | 5555555555 | 5555555555 | 5555555555 |           | 445      | s     | user        | SIP/pcm_dev-00000026 | Dial    | SIP/ge8xbi,30,  |        3 |             |             | 1332958865.38 | 1332958865.38 |           | 
    8703 | HANGUP       | 2012-03-28 14:21:23.120393 |             | Père Noël  | 1001       | 1001       |           |          |       | user        | SIP/ge8xbi-00000028  | AppDial | (Outgoing Line) |        3 |             |             | 1332958873.40 | 1332958865.38 |           | 
    8704 | CHAN_END     | 2012-03-28 14:21:23.120436 |             | Père Noël  | 1001       | 1001       |           |          |       | user        | SIP/ge8xbi-00000028  | AppDial | (Outgoing Line) |        3 |             |             | 1332958873.40 | 1332958865.38 |           | 
    8705 | HANGUP       | 2012-03-28 14:21:23.120533 |             | 5555555555 | 5555555555 | 5555555555 |           | 445      | s     | user        | SIP/pcm_dev-00000026 |         |                 |        3 |             |             | 1332958865.38 | 1332958865.38 |           | 
    8706 | CHAN_END     | 2012-03-28 14:21:23.120981 |             | 5555555555 | 5555555555 | 5555555555 |           | 445      | s     | user        | SIP/pcm_dev-00000026 |         |                 |        3 |             |             | 1332958865.38 | 1332958865.38 |           | 
   (18 rows)

#. External user (`555-555-5555`) calls 445.
#. 1000 *answers*.
#. 1000 *blind transfer* to 1001 from his XiVO client.
#. 1001 *ignores* the call.

::

     id  |  eventtype   |         eventtime          | userdeftype |  cid_name  |  cid_num   |  cid_ani   | cid_rdnis | cid_dnid | exten  |   context   |       channame       | appname |     appdata     | amaflags | accountcode | peeraccount |   uniqueid    |   linkedid    | userfield | peer 
   ------+--------------+----------------------------+-------------+------------+------------+------------+-----------+----------+--------+-------------+----------------------+---------+-----------------+----------+-------------+-------------+---------------+---------------+-----------+------
    8736 | CHAN_START   | 2012-03-28 14:37:16.228527 |             | 5555555555 | 5555555555 |            |           |          | 445    | from-extern | SIP/pcm_dev-0000002e |         |                 |        3 |             |             | 1332959836.46 | 1332959836.46 |           | 
    8737 | APP_START    | 2012-03-28 14:37:16.310874 |             | 5555555555 | 5555555555 | 5555555555 |           | 445      | s      | user        | SIP/pcm_dev-0000002e | Dial    | SIP/k6ztm5,30,  |        3 |             |             | 1332959836.46 | 1332959836.46 |           | 
    8738 | CHAN_START   | 2012-03-28 14:37:16.311033 |             | Tux        | 1000       |            |           |          | s      | default     | SIP/k6ztm5-0000002f  |         |                 |        3 |             |             | 1332959836.47 | 1332959836.46 |           | 
    8739 | ANSWER       | 2012-03-28 14:37:18.863805 |             | Tux        | 1000       | 1000       |           |          | s      | default     | SIP/k6ztm5-0000002f  | AppDial | (Outgoing Line) |        3 |             |             | 1332959836.47 | 1332959836.46 |           | 
    8740 | ANSWER       | 2012-03-28 14:37:18.863995 |             | 5555555555 | 5555555555 | 5555555555 |           | 445      | s      | user        | SIP/pcm_dev-0000002e | Dial    | SIP/k6ztm5,30,  |        3 |             |             | 1332959836.46 | 1332959836.46 |           | 
    8741 | BRIDGE_START | 2012-03-28 14:37:18.86402  |             | 5555555555 | 5555555555 | 5555555555 |           | 445      | s      | user        | SIP/pcm_dev-0000002e | Dial    | SIP/k6ztm5,30,  |        3 |             |             | 1332959836.46 | 1332959836.46 |           | 
    8742 | BRIDGE_END   | 2012-03-28 14:37:23.50673  |             | 5555555555 | 5555555555 | 5555555555 |           | 445      | 1001   | default     | SIP/pcm_dev-0000002e | Dial    | SIP/k6ztm5,30,  |        3 |             |             | 1332959836.46 | 1332959836.46 |           | 
    8743 | HANGUP       | 2012-03-28 14:37:23.506776 |             | Tux        | 1000       | 1000       |           |          |        | default     | SIP/k6ztm5-0000002f  | AppDial | (Outgoing Line) |        3 |             |             | 1332959836.47 | 1332959836.46 |           | 
    8744 | CHAN_END     | 2012-03-28 14:37:23.507286 |             | Tux        | 1000       | 1000       |           |          |        | default     | SIP/k6ztm5-0000002f  | AppDial | (Outgoing Line) |        3 |             |             | 1332959836.47 | 1332959836.46 |           | 
    8745 | APP_START    | 2012-03-28 14:37:23.568572 |             | 5555555555 | 5555555555 | 5555555555 |           | 445      | s      | user        | SIP/pcm_dev-0000002e | Dial    | SIP/ge8xbi,30,  |        3 |             |             | 1332959836.46 | 1332959836.46 |           | 
    8746 | CHAN_START   | 2012-03-28 14:37:23.568773 |             | Père Noël  | 1001       |            |           |          | s      | default     | SIP/ge8xbi-00000030  |         |                 |        3 |             |             | 1332959843.48 | 1332959836.46 |           | 
    8747 | HANGUP       | 2012-03-28 14:37:28.065358 |             | Père Noël  | 1001       | 1001       |           |          | s      | default     | SIP/ge8xbi-00000030  | AppDial | (Outgoing Line) |        3 |             |             | 1332959843.48 | 1332959836.46 |           | 
    8748 | CHAN_END     | 2012-03-28 14:37:28.065415 |             | Père Noël  | 1001       | 1001       |           |          | s      | default     | SIP/ge8xbi-00000030  | AppDial | (Outgoing Line) |        3 |             |             | 1332959843.48 | 1332959836.46 |           | 
    8749 | ANSWER       | 2012-03-28 14:37:28.067965 |             | 5555555555 | 5555555555 | 5555555555 |           | 445      | pickup | xivo-pickup | SIP/pcm_dev-0000002e | Answer  |                 |        3 |             |             | 1332959836.46 | 1332959836.46 |           | 
    8750 | HANGUP       | 2012-03-28 14:37:33.132613 |             | 5555555555 | 5555555555 | 5555555555 |           | 445      | s      | hangup      | SIP/pcm_dev-0000002e |         |                 |        3 |             |             | 1332959836.46 | 1332959836.46 |           | 
    8751 | CHAN_END     | 2012-03-28 14:37:33.133324 |             | 5555555555 | 5555555555 | 5555555555 |           | 445      | s      | hangup      | SIP/pcm_dev-0000002e |         |                 |        3 |             |             | 1332959836.46 | 1332959836.46 |           | 
   (16 rows)

Attended transfer
-----------------

#. External user (`555-555-5555`) calls 445.
#. 1000 *answers*.
#. 1000 initiate an *attended transfer* to 1001.
#. 1001 *answers* and talks to 1001.
#. 1000 completes the transfer.
#. 1001 *hangs up* after a few seconds.

::

     id  |  eventtype   |         eventtime          | userdeftype |  cid_name  |  cid_num   |  cid_ani   | cid_rdnis | cid_dnid | exten |   context   |          channame           | appname |     appdata     | amaflags | accountcode | peeraccount |   uniqueid    |   linkedid    | userfield | peer 
   ------+--------------+----------------------------+-------------+------------+------------+------------+-----------+----------+-------+-------------+-----------------------------+---------+-----------------+----------+-------------+-------------+---------------+---------------+-----------+------
    8768 | HANGUP       | 2012-03-28 14:52:41.916113 |             | 5555555555 | 5555555555 | 5555555555 |           | 445      | s     | user        | SIP/pcm_dev-00000031        |         |                 |        3 |             |             | 1332960744.49 | 1332960744.49 |           | 
    8769 | CHAN_END     | 2012-03-28 14:52:41.916516 |             | 5555555555 | 5555555555 | 5555555555 |           | 445      | s     | user        | SIP/pcm_dev-00000031        |         |                 |        3 |             |             | 1332960744.49 | 1332960744.49 |           | 
    8770 | CHAN_START   | 2012-03-28 14:52:56.055872 |             | 5555555555 | 5555555555 |            |           |          | 445   | from-extern | SIP/pcm_dev-00000034        |         |                 |        3 |             |             | 1332960776.52 | 1332960776.52 |           | 
    8771 | APP_START    | 2012-03-28 14:52:56.130032 |             | 5555555555 | 5555555555 | 5555555555 |           | 445      | s     | user        | SIP/pcm_dev-00000034        | Dial    | SIP/k6ztm5,30,  |        3 |             |             | 1332960776.52 | 1332960776.52 |           | 
    8772 | CHAN_START   | 2012-03-28 14:52:56.130213 |             | Tux        | 1000       |            |           |          | s     | default     | SIP/k6ztm5-00000035         |         |                 |        3 |             |             | 1332960776.53 | 1332960776.52 |           | 
    8773 | ANSWER       | 2012-03-28 14:52:57.701373 |             | Tux        | 1000       | 1000       |           |          | s     | default     | SIP/k6ztm5-00000035         | AppDial | (Outgoing Line) |        3 |             |             | 1332960776.53 | 1332960776.52 |           | 
    8774 | ANSWER       | 2012-03-28 14:52:57.701866 |             | 5555555555 | 5555555555 | 5555555555 |           | 445      | s     | user        | SIP/pcm_dev-00000034        | Dial    | SIP/k6ztm5,30,  |        3 |             |             | 1332960776.52 | 1332960776.52 |           | 
    8775 | BRIDGE_START | 2012-03-28 14:52:57.701925 |             | 5555555555 | 5555555555 | 5555555555 |           | 445      | s     | user        | SIP/pcm_dev-00000034        | Dial    | SIP/k6ztm5,30,  |        3 |             |             | 1332960776.52 | 1332960776.52 |           | 
    8776 | CHAN_START   | 2012-03-28 14:53:04.604461 |             | Tux        | 1000       |            |           |          | 1001  | default     | SIP/k6ztm5-00000036         |         |                 |        3 |             |             | 1332960784.54 | 1332960784.54 |           | 
    8777 | APP_START    | 2012-03-28 14:53:04.665818 |             | Tux        | 1000       | 1000       |           | 1001     | s     | user        | SIP/k6ztm5-00000036         | Dial    | SIP/ge8xbi,30,  |        3 |             |             | 1332960784.54 | 1332960784.54 |           | 
    8778 | CHAN_START   | 2012-03-28 14:53:04.665996 |             | Père Noël  | 1001       |            |           |          | s     | default     | SIP/ge8xbi-00000037         |         |                 |        3 |             |             | 1332960784.55 | 1332960784.54 |           | 
    8779 | ANSWER       | 2012-03-28 14:53:06.314275 |             | Père Noël  | 1001       | 1001       |           |          | s     | default     | SIP/ge8xbi-00000037         | AppDial | (Outgoing Line) |        3 |             |             | 1332960784.55 | 1332960784.54 |           | 
    8780 | ANSWER       | 2012-03-28 14:53:06.314717 |             | Tux        | 1000       | 1000       |           | 1001     | s     | user        | SIP/k6ztm5-00000036         | Dial    | SIP/ge8xbi,30,  |        3 |             |             | 1332960784.54 | 1332960784.54 |           | 
    8781 | BRIDGE_START | 2012-03-28 14:53:06.314762 |             | Tux        | 1000       | 1000       |           | 1001     | s     | user        | SIP/k6ztm5-00000036         | Dial    | SIP/ge8xbi,30,  |        3 |             |             | 1332960784.54 | 1332960784.54 |           | 
    8782 | HANGUP       | 2012-03-28 14:53:12.226404 |             | Tux        | 1000       | 1000       |           |          |       | user        | SIP/k6ztm5-00000035         | AppDial | (Outgoing Line) |        3 |             |             | 1332960776.53 | 1332960776.52 |           | 
    8783 | CHAN_END     | 2012-03-28 14:53:12.226445 |             | Tux        | 1000       | 1000       |           |          |       | user        | SIP/k6ztm5-00000035         | AppDial | (Outgoing Line) |        3 |             |             | 1332960776.53 | 1332960776.52 |           | 
    8784 | HANGUP       | 2012-03-28 14:53:12.22654  |             | Tux        | 1000       | 1000       |           | 1001     | s     | user        | SIP/k6ztm5-00000036<ZOMBIE> |         |                 |        3 |             |             | 1332960776.52 | 1332960776.52 |           | 
    8785 | CHAN_END     | 2012-03-28 14:53:12.226566 |             | Tux        | 1000       | 1000       |           | 1001     | s     | user        | SIP/k6ztm5-00000036<ZOMBIE> |         |                 |        3 |             |             | 1332960776.52 | 1332960776.52 |           | 
    8786 | BRIDGE_END   | 2012-03-28 14:53:18.145645 |             | 5555555555 | 5555555555 | 5555555555 |           | 445      | s     | user        | SIP/pcm_dev-00000034        | Dial    | SIP/ge8xbi,30,  |        3 |             |             | 1332960784.54 | 1332960776.52 |           | 
    8787 | HANGUP       | 2012-03-28 14:53:18.146582 |             | Père Noël  | 1001       | 1001       |           |          |       | user        | SIP/ge8xbi-00000037         | AppDial | (Outgoing Line) |        3 |             |             | 1332960784.55 | 1332960776.52 |           | 
    8788 | CHAN_END     | 2012-03-28 14:53:18.14666  |             | Père Noël  | 1001       | 1001       |           |          |       | user        | SIP/ge8xbi-00000037         | AppDial | (Outgoing Line) |        3 |             |             | 1332960784.55 | 1332960776.52 |           | 
    8789 | HANGUP       | 2012-03-28 14:53:18.146789 |             | 5555555555 | 5555555555 | 5555555555 |           | 445      | s     | user        | SIP/pcm_dev-00000034        |         |                 |        3 |             |             | 1332960784.54 | 1332960776.52 |           | 
    8790 | CHAN_END     | 2012-03-28 14:53:18.147343 |             | 5555555555 | 5555555555 | 5555555555 |           | 445      | s     | user        | SIP/pcm_dev-00000034        |         |                 |        3 |             |             | 1332960784.54 | 1332960776.52 |           | 
   (23 rows)
